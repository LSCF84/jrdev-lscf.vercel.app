<script src="https://cdn.tailwindcss.com"></script>
<script>
    // Configuración base de Tailwind, los colores se actualizarán por JS
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    // Estos serán los valores por defecto si no hay localStorage
                    'primary': '#FF5733', 
                    'secondary': '#343A40', 
                    'accent': '#17A2B8',
                    'form-bg': '#1e2124',
                    'page-bg': '#0d1117',
                },
            },
        },
    }
</script>
<style>
    /* Estilos generales para Inter y centrado */
    body {
        font-family: 'Inter', sans-serif;
        /* Usamos la variable CSS para el fondo */
        background-color: var(--page-bg, #0d1117); 
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
    }
    .form-container {
        max-width: 550px;
        width: 100%;
        /* Usamos la variable CSS para el contenedor */
        background-color: var(--form-bg, #1e2124); 
    }
    /* Clases para la transición de la alerta de error */
    .alert-transition {
        transition: all 0.3s ease-in-out;
    }
    .alert-closed {
        opacity: 0;
        height: 0;
        margin-bottom: 0 !important;
    }
    .alert-open {
        opacity: 100;
        height: auto;
        margin-bottom: 1.5rem; /* mb-6 en Tailwind */
    }
</style>

<div class="form-container rounded-xl shadow-2xl p-6 md:p-10">

    <!-- Selector de Colores (Nuevo Elemento) -->
    <div class="flex items-center justify-end space-x-2 mb-6">
        <label for="colorPicker" class="text-sm font-medium text-gray-400">Color del Tema:</label>
        <input type="color" id="colorPicker" value="#FF5733" 
               class="w-8 h-8 rounded-full border-none p-0 cursor-pointer" 
               style="overflow: hidden; background: transparent;">
        <button id="resetColor" class="text-xs text-gray-500 hover:text-gray-300 ml-2">Reset</button>
    </div>
    
    <!-- --------------------------------------- -->
    <!-- 1. Formulario de Contacto (Visible por defecto) -->
    <!-- --------------------------------------- -->
    <div id="contactFormContainer">
        <h1 class="text-3xl font-bold text-white mb-2">¡Empecemos a trabajar juntos!</h1>
        <p class="text-gray-400 mb-8">Rellena este breve formulario y me pondré en contacto contigo lo antes posible.</p>

        <form id="contactForm" action="#" method="POST" class="space-y-6">

            <!-- Mensaje de Alerta (Solo para errores, se oculta/muestra con JS) -->
            <div id="alertContainer" class="alert-transition alert-closed">
                <!-- Contenido del mensaje de error se inyecta aquí -->
            </div>

            <!-- Nombre Completo -->
            <div>
                <label for="name" class="block text-sm font-medium text-gray-300">Nombre completo *</label>
                <!-- Clases de Focus dinámicas (focus:ring-primary focus:border-primary) -->
                <input type="text" id="name" name="Nombre completo" required
                    class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-primary focus:border-primary">
            </div>

            <!-- Email (CRUCIAL: usa '_replyto' para Formspree) -->
            <div>
                <label for="email" class="block text-sm font-medium text-gray-300">Email *</label>
                <input type="email" id="email" name="_replyto" required 
                    placeholder="tu_correo@dominio.com"
                    class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-primary focus:border-primary">
            </div>

            <!-- Tipo de Proyecto -->
            <div>
                <label for="project_type" class="block text-sm font-medium text-gray-300">¿En qué puedo ayudarte? *</label>
                <select id="project_type" name="Tipo de Proyecto" required
                        class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-primary focus:border-primary appearance-none">
                    <option value="">Selecciona una opción</option>
                    <option value="Desarrollo Web (Landing Page)">Desarrollo Web (Landing Page)</option>
                    <option value="Desarrollo Web (E-commerce)">Desarrollo Web (E-commerce)</option>
                    <option value="Integración API/Backend">Integración API/Backend</option>
                    <option value="Entrevista, para trabajar en tu empresa">Entrevista, para trabajar en tu empresa</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>

            <!-- Detalles del Proyecto -->
            <div>
                <label for="project_details" class="block text-sm font-medium text-gray-300">Cuéntame más detalles sobre lo que necesitas:</label>
                <textarea id="project_details" name="Detalles del Proyecto" rows="4" 
                        class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-primary focus:border-primary"></textarea>
            </div>

            <!-- Presupuesto Estimado -->
            <div>
                <label for="budget" class="block text-sm font-medium text-gray-300">Presupuesto estimado (Opcional)</label>
                <select id="budget" name="Presupuesto Estimado"
                        class="mt-1 block w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-primary focus:border-primary appearance-none">
                    <option value="No especificado">Selecciona un rango</option>
                    <option value="Menos de 1000€">Menos de 1000€</option>
                    <option value="1000€ - 3000€">1000€ - 3000€</option>
                    <option value="3000€ - 6000€">3000€ - 6000€</option>
                    <option value="Más de 6000€">Más de 6000€</option>
                </select>
            </div>

            <!-- Botón de Envío -->
            <!-- Clases de color dinámicas (bg-primary y hover:bg-orange-600 -> se ajusta el hover en JS) -->
            <button type="submit" id="submitButton"
                    class="w-full py-3 bg-primary text-white font-semibold rounded-lg shadow-lg hover:bg-orange-600 focus:outline-none focus:ring-4 focus:ring-primary transition duration-150 ease-in-out">
                Enviar Solicitud
            </button>
            
            <!-- Campo Honeypot Oculto (Anti-spam de Formspree) -->
            <input type="text" name="_gotcha" style="display:none" />
        </form>
    </div>


    <!-- --------------------------------------- -->
    <!-- 2. Mensaje de Éxito (Oculto por defecto) -->
    <!-- --------------------------------------- -->
    <div id="successMessage" class="hidden text-center py-10 md:py-16">
        <!-- Icono de Check Grande (usando SVG) -->
        <svg class="w-20 h-20 mx-auto text-green-500 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>

        <h2 class="text-3xl font-bold text-white mb-3">¡Mensaje Enviado con Éxito!</h2>
        <p class="text-gray-400 text-lg mb-8">
            Gracias por ponerte en contacto. Revisaré tu solicitud lo antes posible y te responderé directamente al correo electrónico que proporcionaste.
        </p>
        
        <!-- Botón para volver o recargar. Usa color 'accent' para contraste -->
        <button onclick="window.location.reload();"
                class="py-2 px-6 bg-accent text-white font-semibold rounded-lg shadow-lg hover:bg-cyan-600 transition duration-150 ease-in-out">
            Volver al Formulario
        </button>
    </div>
    
    <p class="text-center text-sm text-gray-500 mt-4">
        <!-- Enlace que usa color 'primary' -->
        Volver al <a href="#" class="text-primary hover:text-orange-600">Portafolio Principal</a>
    </p>
</div>

<script>
    // ----------------------------------------------------
    // Lógica JavaScript para el manejo del formulario
    // ----------------------------------------------------
    
    // *** ¡ATENCIÓN! DEBES REEMPLAZAR ESTA URL CON TU ENDPOINT REAL DE FORMSPREE ***
    const FORMSPREE_ENDPOINT = 'https://formspree.io/f/fmoqgrkp'; 
    // **********************************************************************

    // Colores por defecto para reset
    const DEFAULT_PRIMARY_COLOR = '#FF5733'; // Naranja
    const DEFAULT_HOVER_COLOR = '#E04F2E';  // Naranja oscuro (calculado)

    const formContainer = document.getElementById('contactFormContainer');
    const successMessage = document.getElementById('successMessage');
    const form = document.getElementById('contactForm');
    const button = document.getElementById('submitButton');
    const colorPicker = document.getElementById('colorPicker');
    const resetColorButton = document.getElementById('resetColor');
    
    /**
     * Calcula un color más oscuro para el estado hover del botón.
     * @param {string} hex - El color base en formato #RRGGBB.
     * @param {number} percent - Porcentaje a oscurecer (e.g., 15).
     * @returns {string} El color resultante en formato #RRGGBB.
     */
    function darkenColor(hex, percent) {
        let r = parseInt(hex.substring(1, 3), 16);
        let g = parseInt(hex.substring(3, 5), 16);
        let b = parseInt(hex.substring(5, 7), 16);

        r = Math.floor(r * (100 - percent) / 100);
        g = Math.floor(g * (100 - percent) / 100);
        b = Math.floor(b * (100 - percent) / 100);

        r = (r < 0) ? 0 : r;
        g = (g < 0) ? 0 : g;
        b = (b < 0) ? 0 : b;
